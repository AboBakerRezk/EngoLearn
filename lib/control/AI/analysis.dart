// ignore_for_file: unnecessary_null_comparison

import 'dart:async';
import 'dart:convert';
import 'dart:io';
import 'dart:math';
import 'dart:typed_data';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_local_notifications/flutter_local_notifications.dart';
import 'package:image_picker/image_picker.dart';
import 'package:tensorflow_lite_flutter/tensorflow_lite_flutter.dart';
import 'package:shared_preferences/shared_preferences.dart';

import 'package:http/http.dart' as http;
List<String> generalResponses = [
  "كيف يمكنني مساعدتك اليوم؟",
  "هل لديك أي استفسارات أخرى؟",
  "يمكنني مساعدتك في مجموعة متنوعة من المواضيع.",
  "هل تحتاج إلى نصيحة معينة؟",
  "ما الذي ترغب في معرفته بالتحديد؟",
  "هل ترغب في التحدث عن خطط دراستك؟",
  "ما هو موضوعك المفضل في الدراسة؟",
  "كيف كان يومك حتى الآن؟",
  "ما هي المادة التي تواجه فيها صعوبة؟",
  "هل لديك أي أهداف معينة ترغب في تحقيقها؟",
  "أخبرني عن اهتماماتك.",
  "هل تحتاج إلى مساعدة في مشروع معين؟",
  "ما هو أكبر تحدٍ تواجهه حاليًا؟",
  "هل ترغب في معرفة المزيد عن موضوع معين؟",
  "كيف يمكنني تحسين تجربتك هنا؟",
  "ما الذي يجذب اهتمامك في الوقت الحالي؟",
  "هل لديك سؤال حول مادة معينة؟",
  "ما هو الأمر الذي تشعر أنه يعيق تقدمك؟",
  "هل تفضل الدراسة بمفردك أم مع الآخرين؟",
  "ما هي تقنيات الدراسة التي تستخدمها؟",
  "هل لديك خطط للدراسة في الخارج؟",
  "كيف تقيم تجربتك الدراسية حتى الآن؟",
  "هل لديك أي عادات دراسية تحب أن تتبعها؟",
  "ما هو الوقت الذي تفضل الدراسة فيه؟",
  "هل ترغب في معرفة المزيد عن الموارد التعليمية؟",
  "ما هو الكتاب الذي تقرأه حاليًا؟",
  "هل لديك أي مهارات جديدة ترغب في تعلمها؟",
  "ما هو أكبر إنجاز حققته في دراستك؟",
  "كيف تحافظ على تحفيزك أثناء الدراسة؟",
  "ما هي أفضل نصيحة تلقيتها حول الدراسة؟",
  "هل لديك أي استراتيجيات لمراجعة المعلومات؟",
  "ما هي أهدافك التعليمية طويلة المدى؟",
  "كيف توازن بين الدراسة والأنشطة الأخرى؟",
  "ما الذي يثير اهتمامك في مجال التعليم؟",
  "هل لديك أصدقاء يدرسون معك؟",
  "ما هي تجربتك مع التعلم عبر الإنترنت؟",
  "هل تفضل الدروس المباشرة أم التسجيلات؟",
  "ما هو أسلوب التعلم الذي يناسبك أكثر؟",
  "كيف يمكنك تقييم تقدمك الدراسي؟",
  "ما هو أكبر درس تعلمته حتى الآن؟",
  "هل لديك أي قصص ملهمة تود مشاركتها؟",
  "ما هي الموضوعات التي تود استكشافها أكثر؟",
  "كيف تستعد للاختبارات؟",
  "ما هي التحديات التي واجهتها في العام الماضي؟",
  "هل لديك أي أسئلة حول المواد العلمية؟",
  "ما هو طموحك المهني بعد الدراسة؟",
  "كيف تدير وقتك أثناء الدراسة؟",
  "ما هو موضوعك المفضل في المدرسة؟",
  "هل تفكر في متابعة دراستك في مرحلة أعلى؟",
  "ما هي أدوات الدراسة التي تجدها مفيدة؟",
  "كيف تعبر عن أفكارك في مشروعك الدراسي؟",
  "ما هي أفضل الطرق لتحفيز الآخرين؟",
  "هل لديك قدوة في مجال التعليم؟",
  "ما الذي يجعلك تشعر بالرضا أثناء الدراسة؟",
  "كيف تتعامل مع التوتر المرتبط بالدراسة؟",
  "ما هو مصدر إلهامك في الحياة؟",
  "هل تفضل التعلم في مجموعة أم بمفردك؟",
  "ما هي الأنشطة التي تقوم بها خارج الدراسة؟",
  "هل لديك أي أسئلة حول الحياة الجامعية؟",
  "ما هو التحدي الأكبر الذي واجهته في الدراسة؟",
  "كيف تحافظ على توازن الحياة والدراسة؟",
  "ما هي النصيحة التي تعطيها للطلاب الجدد؟",
  "ما هو أسلوب التعلم الذي تحبه أكثر؟",
  "هل لديك أي ملاحظات حول المناهج الدراسية؟",
  "ما هو أفضل كتاب قرأته في مجالك؟",
  "كيف تتعامل مع الأوقات الصعبة أثناء الدراسة؟",
  "ما هي الموضوعات التي تجدها صعبة؟",
  "هل تفضل الدراسة في مكتبة أم في المنزل؟",
  "ما هي الفائدة التي تجدها في الدراسة الجماعية؟",
  "كيف تتعامل مع الملل أثناء الدراسة؟",
  "ما هي أسهل مادة بالنسبة لك؟",
  "هل لديك تجارب إيجابية مع التعليم عن بعد؟",
  "ما هو هدفك لهذا العام الدراسي؟",
  "كيف يمكنني تحسين مهاراتي الدراسية؟",
  "ما هو الدرس الأكثر أهمية الذي تعلمته؟",
  "هل تفكر في الانخراط في الأنشطة الطلابية؟",
  "كيف يمكنك وصف تجربتك الدراسية؟",
  "ما هي خططك للعام القادم؟",
  "هل لديك أي اهتمامات خارج الدراسة؟",
  "كيف يمكنك تعزيز تركيزك أثناء الدراسة؟",
  "ما هي العادات التي تساعدك في التعلم؟",
  "كيف تقيم تأثير المعلمين على تعلمك؟",
  "ما هو الدافع الذي يدفعك للمضي قدمًا؟",
  "هل لديك أي نصائح للطلاب حول التخطيط؟",
  "ما هي التحديات التي تواجهها في المواد الأدبية؟",
  "هل لديك أي أصدقاء في المجال الدراسي؟",
  "كيف تصف أسلوب التعلم الخاص بك؟",
  "ما هي الأمور التي تعتبرها مهمة في التعليم؟",
  "هل لديك أي أهداف محددة ترغب في تحقيقها؟",
  "كيف تتعامل مع المواعيد النهائية للواجبات؟",
  "ما هي المشاريع التي عملت عليها مؤخرًا؟",
  "كيف تعزز مهاراتك في التفكير النقدي؟",
  "هل لديك أي أسئلة عن التخصصات المختلفة؟",
  "ما هو المعنى الذي تعطيه للتعليم؟",
  "كيف توازن بين الدراسة والترفيه؟",
  "ما هي المجالات التي ترغب في تحسينها؟",
  "هل لديك نصائح للطلاب حول القراءة؟",
  "كيف يمكنك زيادة إنتاجيتك الدراسية؟",
  "ما هو التحدي الذي ترغب في التغلب عليه؟",
  "هل لديك تجارب مع الموجهين الأكاديميين؟",
  "كيف يمكنك تحفيز الآخرين في الدراسة؟",
  "ما هي أفضل استراتيجيات المذاكرة لديك؟",
  "هل لديك أي تجارب ملهمة مع التعليم؟",
  "كيف تعبر عن أفكارك في الفصل الدراسي؟",
  "ما هي الموارد التي تجدها مفيدة للدراسة؟",
  "هل لديك نصائح حول إدارة الوقت؟",
  "ما هي المواد التي تحبها أكثر؟",
  "كيف يمكنك تحقيق النجاح الأكاديمي؟",
  "هل لديك أي عادات إيجابية تحب اتباعها؟",
  "ما هو أكبر انجاز حققته في دراستك؟",
  "هل لديك نصائح حول التحضير للاختبارات؟",
  "كيف تتعامل مع الصعوبات الدراسية؟",
  "ما هو أسلوب التعليم الذي تفضله؟",
  "هل لديك أي اهتمامات في مجال التعليم؟",
  "ما هي الموضوعات التي ترغب في دراستها أكثر؟",
  "كيف تقيم تجربتك في التعلم الذاتي؟",
  "ما هي الأفكار التي تلهمك في مجال التعليم؟",
  "هل لديك أي نصائح لتحسين الأداء الأكاديمي؟",
  "ما هو الرأي الذي تود التعبير عنه حول التعليم؟",
  "كيف تحافظ على تركيزك أثناء الدراسة؟",
  "ما هي أفضل الطرق للتعلم من الأخطاء؟",
  "هل لديك أسئلة حول المسارات المهنية؟",
  "كيف تفاعل مع المعلمين خلال دراستك؟",
  "ما هي التحديات التي تواجهها في التعلم؟",
  "كيف يمكنك تحسين مهاراتك في الكتابة؟",
  "هل لديك أي قصص عن التعليم تلهمك؟",
  "ما هي أفضل الطرق للتخطيط للمستقبل؟",
  "هل لديك أي نصائح للطلاب في مرحلة الثانوية؟",
  "ما هو أكبر درس تعلمته في المدرسة؟",
  "كيف يمكنك وصف تجربتك في المدرسة؟",
  "ما هي المجالات التي تحب أن تتعلمها؟",
  "هل لديك أي استراتيجيات لتحسين التركيز؟",
  "كيف يمكنك دعم أصدقائك أثناء الدراسة؟",
  "ما هو أسلوب التعلم الذي تحبه؟",
  "هل لديك أي طموحات للدراسة في الخارج؟",
  "ما هي المهارات التي ترغب في تحسينها؟",
  "كيف تعزز من ثقتك بنفسك أثناء الدراسة؟",
  "ما هي الموضوعات التي تثير فضولك؟",
  "هل لديك أي نصائح لتحسين الاستيعاب؟",
  "كيف تتعامل مع الضغوط الدراسية؟",
  "ما هو أكبر إنجاز حققته في حياتك الدراسية؟",
  "هل لديك أي نصائح حول البحث عن معلومات؟",
  "كيف تتعامل مع الأفكار السلبية أثناء الدراسة؟",
  "ما هي الخطوات التي اتخذتها لتحقيق أهدافك؟",
  "هل لديك أي اقتراحات لتحسين التعليم؟",
  "ما هو أكثر شيء تحبه في دراستك؟",
  "كيف تقيم تأثير التعليم على حياتك؟",
  "ما هو الدافع الذي يجعلك ترغب في التعلم؟",
  "هل لديك أي نصائح لتحسين الذكاء العاطفي؟",
  "ما هي الدروس التي تعلمتها من الفشل؟",

  "ما هي الأنشطة التي تحب القيام بها في وقت فراغك؟",
  "كيف تستعد للمواعيد النهائية للمشاريع؟",
  "هل لديك أي خطط للمشاركة في ورش عمل أو دورات تدريبية؟",
  "ما هو الدرس الأكثر تأثيرًا الذي تلقيته؟",
  "كيف تصف عملية التعلم بالنسبة لك؟",
  "ما هي المواد التي تتمنى لو كنت تدرسها في المدرسة؟",
  "هل لديك أي نصائح لتحسين الكتابة الأكاديمية؟",
  "كيف يمكنني مساعدتك في تحقيق أهدافك؟",
  "ما هو الأسلوب الذي تفضله في الدراسة؟",
  "هل لديك أي نصائح حول استخدام التكنولوجيا في الدراسة؟",
  "ما هو أكبر تحدٍ تواجهه في مسيرتك التعليمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرار سريع؟",
  "هل لديك أي اقتراحات حول تحسين الفصول الدراسية؟",
  "ما هي أكبر صعوبة واجهتها في التعليم؟",
  "كيف يمكنك تحسين مهارات التواصل لديك؟",
  "هل لديك أي نصائح حول الاستفادة من الملاحظات؟",
  "ما هو الشيء الذي تحب القيام به أكثر في حياتك اليومية؟",
  "كيف تعزز من قدرتك على التحليل؟",
  "ما هي الأفكار التي تلهمك للتعلم؟",
  "هل لديك أي طموحات بشأن التعليم المستمر؟",
  "كيف يمكنك الاستفادة من النقد البناء؟",
  "ما هي الموارد التي تعتبرها الأكثر فائدة؟",
  "هل لديك أي استراتيجيات للتعامل مع العواطف أثناء الدراسة؟",
  "كيف تتعامل مع عدم الثقة أثناء تقديم العروض؟",
  "ما هو الشيء الذي تريد تحقيقه في دراستك؟",
  "هل لديك أي نصائح لتحسين الاستعداد للاختبارات؟",
  "ما هي أكبر إنجازاتك الشخصية التي تفخر بها؟",
  "كيف يمكنك تعزيز مهاراتك في التفكير الاستراتيجي؟",
  "هل لديك أي تجارب مع التعليم التعاوني؟",
  "ما هو الدافع الذي يجعلك تسعى لتحقيق النجاح؟",
  "كيف تقيم تأثير التعلم الذاتي على حياتك؟",
  "ما هي الأمور التي تعتبرها أساسية في التعليم؟",
  "هل لديك أي نصائح حول الاستعداد للامتحانات؟",
  "كيف تتعامل مع الأشخاص الذين يعارضون آرائك؟",
  "ما هي الأمور التي تشعرك بالتوتر أثناء الدراسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم النشط؟",
  "ما هو أكبر درس تعلمته من تجربة تعليمية؟",
  "كيف يمكنك تعزيز التركيز أثناء الدراسة؟",
  "هل لديك أي نصائح حول إدارة الوقت بفعالية؟",
  "ما هي الأنشطة التي تفضل القيام بها بعد الدراسة؟",
  "كيف تقيم دور المعلمين في التعلم؟",
  "ما هي أفضل الطرق لتعزيز التعاون بين الطلاب؟",
  "هل لديك أي طموحات لتكون قائدًا في مجالك؟",
  "ما هو أكبر إنجاز حققته في حياتك؟",
  "كيف تتعامل مع القلق المرتبط بالاختبارات؟",
  "هل لديك أي استراتيجيات للتعلم من الأخطاء؟",
  "ما هي الأمور التي تثير فضولك في التعليم؟",
  "كيف يمكنك الاستفادة من الفرص التعليمية؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز؟",
  "كيف يمكنك تعزيز مشاركتك في الأنشطة الطلابية؟",
  "هل لديك أي نصائح حول البحث عن معلومات جديدة؟",
  "ما هي أكبر تحديات التعلم عن بُعد بالنسبة لك؟",
  "كيف يمكنك تحسين استراتيجياتك في المذاكرة؟",
  "هل لديك أي اقتراحات لتحسين التعليم في المجتمع؟",
  "ما هي الموضوعات التي تود تعلمها بشكل أعمق؟",
  "كيف تعزز من فعالية دراستك؟",
  "هل لديك أي أفكار حول التعليم القائم على المشروع؟",
  "ما هي المهارات التي تود تطويرها في المستقبل؟",
  "كيف تتعامل مع الفشل كجزء من تجربة التعلم؟",
  "هل لديك أي نصائح حول العمل الجماعي؟",
  "ما هو الشيء الذي ترغب في تغييره في نظام التعليم؟",
  "كيف يمكنك تعزيز حب التعلم لديك؟",
  "هل لديك أي استراتيجيات للتعامل مع ضغوط الدراسة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في حياتك الدراسية؟",
  "كيف تتعامل مع العوائق التي تواجهك أثناء الدراسة؟",
  "هل لديك أي تجارب تعليمية تود مشاركتها؟",
  "ما هي الأمور التي تجعلك متحمسًا للتعلم؟",
  "كيف يمكنك تحسين مهاراتك في الكتابة؟",
  "هل لديك أي نصائح لتحسين الفهم العميق للمواد الدراسية؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف يمكنك تعزيز التعاون بين المعلمين والطلاب؟",
  "هل لديك أي طموحات لتكون مدرسًا في المستقبل؟",
  "ما هو الشيء الذي تود تعلمه في مجال جديد؟",
  "كيف تتعامل مع التحديات التي تواجهك في الدراسة؟",
  "هل لديك أي نصائح حول تحسين أسلوب التعلم؟",
  "ما هي الموضوعات التي ترغب في استكشافها بشكل أكبر؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي استراتيجيات للتغلب على التوتر أثناء الدراسة؟",
  "ما هو الشيء الذي يجعلك تشعر بالرضا أثناء التعلم؟",
  "كيف تتعامل مع النقد السلبي من الآخرين؟",
  "هل لديك أي أفكار حول تعزيز مشاركة الطلاب؟",
  "ما هي الأنشطة التي تعتبرها مفيدة لتعزيز التعلم؟",
  "كيف يمكنك تحسين تقنيات التحدث أمام الجمهور؟",
  "هل لديك أي نصائح حول استخدام التطبيقات التعليمية؟",
  "ما هو أكبر تحدي واجهته في مسيرتك الدراسية؟",
  "كيف تتعامل مع المواقف الصعبة في الدراسة؟",
  "هل لديك أي اقتراحات لتحسين تجربة التعليم الإلكتروني؟",
  "ما هي الأمور التي تلهمك في مجالك الدراسي؟",
  "كيف يمكنك تعزيز مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين التواصل مع المعلمين؟",
  "ما هو الشيء الذي ترغب في تغييره في حياتك الدراسية؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في المواد الدراسية؟",
  "هل لديك أي استراتيجيات لتحسين مهاراتك الأكاديمية؟",
  "ما هي الأنشطة التي تشعرك بالتحفيز أثناء الدراسة؟",
  "كيف يمكنك تحسين أسلوبك في التعلم الذاتي؟",
  "هل لديك أي نصائح للتعامل مع الضغط الدراسي؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمواصلة التعلم؟",
  "كيف تتعامل مع المواعيد النهائية للمشاريع الدراسية؟",
  "هل لديك أي استراتيجيات لتعزيز الفهم العميق؟",
  "ما هي المواد التي تجدها مثيرة للاهتمام؟",
  "كيف يمكنك تحسين مهاراتك في التحليل النقدي؟",
  "هل لديك أي أفكار حول كيفية تعزيز التعلم في المجتمع؟",
  "ما هي الأنشطة التي تساعدك على تحقيق أهدافك الدراسية؟",
  "كيف تتعامل مع المنافسة في المجال الدراسي؟",
  "هل لديك أي اقتراحات لتحسين فعالية الفصول الدراسية؟",
  "ما هو أكبر درس تعلمته من الفشل في الدراسة؟",
  "كيف يمكنك تعزيز حب القراءة لديك؟",
  "هل لديك أي نصائح لتحسين مهارات البحث لديك؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجالك الدراسي؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تود المشاركة فيها لتحسين تعلمك؟",
  "كيف يمكنك تعزيز مهاراتك في التعاون؟",
  "هل لديك أي نصائح حول كيفية تحسين التفاعل في الفصل؟",
  "ما هو أكبر درس تعلمته من تجاربك التعليمية؟",
  "كيف تتعامل مع النقد السلبي من الآخرين؟",
  "هل لديك أي استراتيجيات لتعزيز فهمك للمواد الدراسية؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التحدث أمام الجمهور؟",
  "هل لديك أي نصائح لتحسين مهاراتك في القراءة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز أثناء الدراسة؟",
  "كيف تتعامل مع الضغط الدراسي؟",
  "هل لديك أي أفكار حول تعزيز التعلم في المجتمع؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع المواقف الصعبة في دراستك؟",
  "هل لديك أي أفكار لتحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل؟",
  "كيف يمكنك تعزيز تجربتك في التعليم عن بُعد؟",
  "هل لديك أي نصائح لتحسين قدرتك على التحليل؟",
  "ما هو الشيء الذي يجعلك تشعر بالسعادة أثناء التعلم؟",
  "كيف تتعامل مع التحديات التي تواجهها في مجال التعليم؟",
  "هل لديك أي اقتراحات لتحسين تجربة التعليم؟",
  "ما هي الأمور التي تشعرك بالتحدي في الدراسة؟",
  "كيف يمكنك تحسين استراتيجيات التعلم لديك؟",
  "هل لديك أي نصائح لتحسين ثقتك بنفسك أثناء الدراسة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع المنافسة في مجال الدراسة؟",
  "هل لديك أي استراتيجيات لتعزيز فهمك للمواد الدراسية؟",
  "ما هي الأنشطة التي تود المشاركة فيها لتعزيز تعلمك؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهارات التواصل لديك؟",
  "ما هو الشيء الذي يجعلك تشعر بالسعادة في الدراسة؟",
  "كيف تتعامل مع النقد السلبي من الآخرين؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأمور التي تثير اهتمامك في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم الذاتي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمواصلة التعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجالك الدراسي؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟",
  "هل لديك أي نصائح لتحسين استراتيجيات الدراسة؟",
  "ما هو الشيء الذي يجعلك متحمسًا لمتابعة دراستك؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم الذاتي؟",
  "هل لديك أي اقتراحات لتحسين الفصول الدراسية؟",
  "ما هي الأنشطة التي تجدها ممتعة في مجال التعليم؟",
  "كيف يمكنك تحسين تفكيرك النقدي؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التنظيم؟",
  "ما هو الشيء الذي يجعلك تشعر بالراحة أثناء التعلم؟",
  "كيف تتعامل مع الانتقادات البناءة؟",
  "هل لديك أي استراتيجيات لتحسين أدائك الأكاديمي؟",
  "ما هي الأمور التي تشعرك بالسعادة في الدراسة؟",
  "كيف يمكنك تحسين تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين مهاراتك في العروض التقديمية؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع الضغوط الناتجة عن المنافسة؟",
  "هل لديك أي اقتراحات لتحسين التعلم الذاتي؟",
  "ما هي الأنشطة التي تعزز من إبداعك؟",
  "كيف يمكنك تحسين تعاونك مع زملائك؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالتحفيز للتعلم؟",
  "كيف تتعامل مع الصعوبات التي تواجهها في التعلم؟",
  "هل لديك أي نصائح لتحسين مهاراتك في التحليل؟",
  "ما هي الأمور التي تلهمك في مجال التعليم؟",
  "كيف يمكنك تعزيز التجارب الإيجابية في التعلم؟",
  "هل لديك أي استراتيجيات لتحسين التعاون بين الطلاب؟",
  "ما هو أكبر إنجاز حققته في مسيرتك الأكاديمية؟",
  "كيف تتعامل مع المواقف التي تتطلب اتخاذ قرارات صعبة؟",
  "هل لديك أي طموحات لتكون رائدًا في مجالك؟",
  "ما هي الأمور التي تجدها ملهمة في مجال التعليم؟",
  "كيف يمكنك تحسين مهاراتك في التفكير الإبداعي؟",
  "هل لديك أي نصائح لتحسين استراتيجيات المذاكرة؟",
  "ما هو الشيء الذي يجعلك تشعر بالفخر في دراستك؟",
  "كيف تتعامل مع الضغوط الناتجة عن الاختبارات؟",
  "هل لديك أي اقتراحات حول تحسين التعليم في مجتمعك؟",
  "ما هي المهارات التي تود اكتسابها في المستقبل القريب؟",
  "كيف يمكنك تعزيز تجربتك التعليمية في المدرسة؟",
  "هل لديك أي نصائح لتحسين أسلوب التعلم لديك؟",
  "ما هو الشيء الذي تود تحقيقه في حياتك الدراسية؟",
  "كيف تتعامل مع المنافسة في مجال التعليم؟",
  "هل لديك أي استراتيجيات لتحسين مهارات الكتابة؟",
  "ما هي الأمور التي تشعرك بالإلهام في التعليم؟",
  "كيف يمكنك تحسين أسلوبك في التعلم عن بُعد؟"
];

class UserDataManager {
  Future<void> updatePoints(String category, double points) async {
    final prefs = await SharedPreferences.getInstance();
    double currentPoints = prefs.getDouble(category) ?? 0.0;
    prefs.setDouble(category, currentPoints + points);

    double totalPoints = prefs.getDouble('totalPoints') ?? 0.0;
    prefs.setDouble('totalPoints', totalPoints + points);

    // تحديث آخر تاريخ إضافة للنقاط
    prefs.setString('lastUpdateDate', DateTime.now().toIso8601String());
  }

  Future<double> getPoints(String category) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getDouble(category) ?? 0.0;
  }

  Future<String> getLastUpdateDate() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString('lastUpdateDate') ?? '';
  }

  Future<void> resetDailyProgress() async {
    final prefs = await SharedPreferences.getInstance();
    prefs.setDouble('dailyPoints', 0.0);
  }
}
class ProgressChecker {
  final UserDataManager dataManager = UserDataManager();

  Future<void> checkProgress() async {
    final double totalPoints = await dataManager.getPoints('totalPoints');
    final double dailyPoints = await dataManager.getPoints('dailyPoints');
    final String lastUpdateDate = await dataManager.getLastUpdateDate();

    String message;

    // إرسال رسالة للمستخدم بناءً على التقدم في النقاط
    if (totalPoints >= 1000 && totalPoints < 2000) {
      message = "مبروك! لقد وصلت إلى 1000 نقطة. استمر في التقدم!";
    } else if (totalPoints >= 2000 && totalPoints < 3000) {
      message = "رائع! لقد وصلت إلى 2000 نقطة. أنت تقوم بعمل رائع!";
    } else if (totalPoints >= 5000) {
      message = "إنجاز مذهل! لقد جمعت 5000 نقطة. حافظ على هذا المستوى!";
    }

    // مقارنة النقاط اليومية
    DateTime now = DateTime.now();
    DateTime lastUpdate = DateTime.tryParse(lastUpdateDate) ?? now;
    if (now.day != lastUpdate.day) {
      if (dailyPoints > 500) {
        message = "لقد جمعت اليوم نقاطًا أكثر من أمس. استمر في هذا الأداء!";
      } else {
        message = "حاول جمع نقاط أكثر غدًا. يمكنك الوصول إلى أهدافك!";
      }
      await dataManager.resetDailyProgress();
    }

    // رسالة عن تقدم المستخدم في الخطة التعليمية
    double goalPoints = 10000; // كمثال
    double pointsRemaining = goalPoints - totalPoints;
    if (pointsRemaining > 0) {
      message = "أنت على بُعد ${pointsRemaining.toStringAsFixed(0)} نقطة من إكمال الخطة التعليمية.";
    } else {
      message = "مبروك! لقد أتممت الخطة التعليمية المحددة لك.";
    }

    if (message != null) {
      _sendMessageToUser(message);
    }
  }

  void _sendMessageToUser(String message) {
    // طريقة لإرسال رسالة أو إشعار للمستخدم
    print("إشعار للمستخدم: $message");
  }
}
Future<void> addPointsAndUpdateProgress(String category, double points) async {
  final dataManager = UserDataManager();
  final progressChecker = ProgressChecker();

  await dataManager.updatePoints(category, points);
  await progressChecker.checkProgress();
}

const String mobile = "MobileNet";
const String ssd = "SSD MobileNet";
const String yolo = "Tiny YOLOv2";
const String deeplab = "DeepLab";
const String posenet = "PoseNet";



class UserDataAnalysisPage extends StatefulWidget {
  @override
  _UserDataAnalysisPageState createState() => _UserDataAnalysisPageState();
}

class _UserDataAnalysisPageState extends State<UserDataAnalysisPage> {
  late File _image;
  late List _recognitions;
  String _model = mobile;
  late double _imageHeight;
  late double _imageWidth;
  bool _busy = false;

  // User Data Analysis Variables
  String? _name;
  String? _age;
  String? _gender;
  List<String>? _englishGoal;
  String? _educationLevel;
  String? _memoryType;
  File? _profileImage;

  double grammarPoints = 1000;
  double lessonPoints = 1500;
  double studyHoursPoints = 1200;
  double listeningPoints = 800;
  double speakingPoints = 1100;
  double readingPoints = 900;
  double writingPoints = 700;
  double exercisePoints = 950;
  double sentenceFormationPoints = 1000;
  double gamePoints = 900;

  @override
  void initState() {
    super.initState();
    _busy = true;
    loadModel().then((val) {
      setState(() {
        _busy = false;
      });
    });
    _loadUserData();
  }

  Future<void> _loadUserData() async {
    final prefs = await SharedPreferences.getInstance();
    setState(() {
      _name = prefs.getString('name');
      _age = prefs.getString('age');
      _gender = prefs.getString('gender');
      _englishGoal = prefs.getStringList('english_goal');
      _educationLevel = prefs.getString('education_level');
      _memoryType = prefs.getString('memory_type');
      final imagePath = prefs.getString('image_path');
      if (imagePath != null) {
        _profileImage = File(imagePath);
      }

      // Load points from SharedPreferences or use default values
      grammarPoints = prefs.getDouble('grammarPoints') ?? 1000;
      lessonPoints = prefs.getDouble('lessonPoints') ?? 1500;
      studyHoursPoints = prefs.getDouble('studyHoursPoints') ?? 1200;
      listeningPoints = prefs.getDouble('listeningPoints') ?? 800;
      speakingPoints = prefs.getDouble('speakingPoints') ?? 1100;
      readingPoints = prefs.getDouble('readingPoints') ?? 900;
      writingPoints = prefs.getDouble('writingPoints') ?? 700;
      exercisePoints = prefs.getDouble('exercisePoints') ?? 950;
      sentenceFormationPoints = prefs.getDouble('sentenceFormationPoints') ?? 1000;
      gamePoints = prefs.getDouble('gamePoints') ?? 900;
    });

    _analyzeUserData();
  }

  void _analyzeUserData() {
    double totalPoints = grammarPoints + lessonPoints + studyHoursPoints +
        listeningPoints + speakingPoints + readingPoints +
        writingPoints + exercisePoints + sentenceFormationPoints + gamePoints;

    List<String> strengths = [];
    List<String> weaknesses = [];

    if (listeningPoints > 900) strengths.add('Listening');
    else weaknesses.add('Listening');

    if (speakingPoints > 1000) strengths.add('Speaking');
    else weaknesses.add('Speaking');

    _sendMessageToUser(strengths, weaknesses);
  }

  void _sendMessageToUser(List<String> strengths, List<String> weaknesses) {
    String message = "Strengths: ${strengths.join(', ')}.\n";
    message += "Weaknesses: ${weaknesses.join(', ')}.\n";
    message += "Consider working on your weaknesses to improve.";

    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text('Data Analysis'),
          content: Text(message),
          actions: [
            TextButton(
              child: Text('OK'),
              onPressed: () {
                Navigator.of(context).pop();
              },
            ),
          ],
        );
      },
    );
  }

  Future predictImagePicker() async {
    var imagePicker = ImagePicker();
    var image = await imagePicker.pickImage(source: ImageSource.gallery);
    if (image == null) return;
    setState(() {
      _busy = true;
    });
    predictImage(File(image.path));
  }

  Future predictImage(File image) async {
    // Your model prediction code goes here
  }

  Future loadModel() async {
    Tflite.close();
    try {
      String? res;
      switch (_model) {
        case yolo:
          res = await Tflite.loadModel(
            model: "assets/yolov2_tiny.tflite",
            labels: "assets/yolov2_tiny.txt",
          );
          break;
        case ssd:
          res = await Tflite.loadModel(
            model: "assets/ssd_mobilenet.tflite",
            labels: "assets/ssd_mobilenet.txt",
          );
          break;
        default:
          res = await Tflite.loadModel(
            model: "assets/mobilenet_v1_1.0_224.tflite",
            labels: "assets/mobilenet_v1_1.0_224.txt",
          );
      }
      print(res);
    } on PlatformException {
      print('Failed to load model.');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Image & Data Analysis App'),
      ),
      body: Column(
        children: [
          Expanded(
            child: Center(
              child: Text('Hello, $_name! Select an option below.'),
            ),
          ),
          ElevatedButton(
            onPressed: predictImagePicker,
            child: Text("Pick and Analyze Image"),
          ),
          ElevatedButton(
            onPressed: _analyzeUserData,
            child: Text("Analyze User Data"),
          ),
        ],
      ),
    );
  }
}







class DataAnalysisPage extends StatefulWidget {
  @override
  _DataAnalysisPageState createState() => _DataAnalysisPageState();
}

class _DataAnalysisPageState extends State<DataAnalysisPage> {
  final learningModel = UnifiedEducationalModel();
  String analysisResults = '';

  Future<void> analyzeData() async {
   // await learningModel.downloadRows();
    setState(() {
      analysisResults = "Data analysis results displayed here"; // Update with actual data
    });
  }

  @override
  void initState() {
    super.initState();
    analyzeData(); // Load data on page load
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Data Analysis"),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              "Analysis Results",
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 10),
            Text(analysisResults), // Display analysis results
          ],
        ),
      ),
    );
  }
}


class InformationPage extends StatefulWidget {
  @override
  _InformationPageState createState() => _InformationPageState();
}

class _InformationPageState extends State<InformationPage> {
  final learningModel = UnifiedEducationalModel();
  String chatInfo = '';
  String transcriptionInfo = '';

  Future<void> fetchChatInfo() async {
    await learningModel.chat("كيف يمكنني تحسين مستواي في الرياضيات؟");
    setState(() {
      chatInfo = "Chat response displayed here"; // Replace with actual response
    });
  }

  Future<void> fetchTranscription() async {
    await learningModel.transcribe("https://assembly.ai/news.mp4");
    setState(() {
      transcriptionInfo = "Transcribed text displayed here"; // Replace with actual transcription
    });
  }

  @override
  void initState() {
    super.initState();
    fetchChatInfo();
    fetchTranscription();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Information Display"),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              "Chat Information",
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 10),
            Text(chatInfo),
            SizedBox(height: 20),
            Text(
              "Transcription Information",
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 10),
            Text(transcriptionInfo),
          ],
        ),
      ),
    );
  }
}


class UnifiedEducationalModel {
  final String mathApiUrl = 'https://api-inference.huggingface.co/models/Jr23xd23/Math_Arabic_Llama-3.2-3B-Instruct';
  final String mathApiKey = 'b98400b95f084cd5ba9163d5fc9d2dec'; // استبدل بمفتاح API الخاص بك
  final String assemblyApiKey = 'b98400b95f084cd5ba9163d5fc9d2dec';
  final String vllmBaseUrl = 'http://localhost:8000/v1/chat/completions';

  Future<String> solveMathProblem(String inputText) async {
    final response = await http.post(
      Uri.parse(mathApiUrl),
      headers: {
        'Authorization': 'Bearer $mathApiKey',
        'Content-Type': 'application/json',
      },
      body: json.encode({'inputs': inputText}),
    );

    if (response.statusCode == 200) {
      final decodedResponse = json.decode(response.body);
      return decodedResponse[0]['generated_text'];
    } else {
      throw Exception("فشل الحصول على الناتج. خطأ: ${response.body}");
    }
  }

  Future<String> transcribe(String audioUrl) async {
    final url = Uri.parse('https://api.assemblyai.com/v2/transcript');
    final headers = {
      'authorization': assemblyApiKey,
      'content-type': 'application/json',
    };
    final body = json.encode({'audio_url': audioUrl});

    final response = await http.post(url, headers: headers, body: body);

    if (response.statusCode == 200) {
      final transcript = json.decode(response.body);
      return transcript['text'];
    } else {
      throw Exception("فشل الحصول على النص المكتوب. خطأ: ${response.body}");
    }
  }

  Future<String> chat(String userMessage) async {
    final response = await http.post(
      Uri.parse(vllmBaseUrl),
      headers: {
        "Content-Type": "application/json",
      },
      body: json.encode({
        "model": "xlnet/xlnet-base-cased",
        "messages": [
          {"role": "user", "content": userMessage}
        ],
      }),
    );

    if (response.statusCode == 200) {
      final responseData = json.decode(response.body);
      return responseData['choices'][0]['message']['content'];
    } else {
      throw Exception("فشل الحصول على الرد. خطأ: ${response.body}");
    }
  }

  Future<void> analyzeUserData(String audioUrl, String mathQuestion,
      String userMessage) async {
    try {
      // تحويل الصوت إلى نص
      String transcript = await transcribe(audioUrl);
      print("النص المحول: $transcript");

      // حل مسألة رياضية
      String mathSolution = await solveMathProblem(mathQuestion);
      print("حل المسألة: $mathSolution");

      // محادثة مع المستخدم
      String chatResponse = await chat(userMessage);
      print("رد الدردشة: $chatResponse");

      // هنا يمكنك إضافة المزيد من الوظائف مثل تحليل البيانات وإرسال الرسائل
    } catch (e) {
      print("حدث خطأ: $e");
    }
  }

}



class ChatBotPage extends StatefulWidget {
  @override
  _ChatBotPageState createState() => _ChatBotPageState();
}

class _ChatBotPageState extends State<ChatBotPage> {
  final TextEditingController _messageController = TextEditingController();
  List<Map<String, String>> _messages = [];
  double totalPoints = 0;
  double dailyPoints = 0;
  double goalPoints = 10000; // الهدف النهائي للخطة التعليمية
  List<String> learningPlan = []; // سحب الخطة من UserPlanPage
  String userRank = "مبتدئ";

  @override
  void initState() {
    super.initState();
    _loadUserData();
  }

  // تحميل بيانات المستخدم والخطة التعليمية
  Future<void> _loadUserData() async {
    final prefs = await SharedPreferences.getInstance();
    setState(() {
      totalPoints = prefs.getDouble('totalPoints') ?? 0;
      dailyPoints = prefs.getDouble('dailyPoints') ?? 0;
      learningPlan = prefs.getStringList('learning_plan') ?? [];
    });
  }

  // حفظ بيانات المستخدم
  Future<void> _saveUserData() async {
    final prefs = await SharedPreferences.getInstance();
    prefs.setDouble('totalPoints', totalPoints);
    prefs.setDouble('dailyPoints', dailyPoints);
  }

  // تحديث النقاط وإشعارات التقدم
  Future<void> _updatePoints(double points) async {
    setState(() {
      totalPoints += points;
      dailyPoints += points;
      _updateUserRank();
    });
    await _saveUserData();
    _checkProgress();
  }

  // تحديث رتبة المستخدم بناءً على النقاط
  void _updateUserRank() {
    if (totalPoints < 2000) {
      userRank = "مبتدئ";
    } else if (totalPoints < 5000) {
      userRank = "متعلم";
    } else if (totalPoints < 10000) {
      userRank = "متوسط";
    } else if (totalPoints < 20000) {
      userRank = "متعلم متقدم";
    } else {
      userRank = "خبير";
    }
  }

  // التحقق من التقدم وإرسال إشعارات للمستخدم
  Future<void> _checkProgress() async {
    String? message;

    // تحقق من التقدم الإجمالي في النقاط
    if (totalPoints >= 5000 && totalPoints < 10000) {
      message = "مبروك! لقد وصلت إلى 5000 نقطة. أنت في تقدم ممتاز!";
    } else if (totalPoints >= 10000) {
      message = "تهانينا! لقد حققت هدف الخطة التعليمية وأكملت 10000 نقطة.";
    }

    // تحقق من النقاط اليومية مقارنةً بنقاط اليوم السابق
    final prefs = await SharedPreferences.getInstance();
    DateTime lastUpdateDate = DateTime.tryParse(prefs.getString('lastUpdateDate') ?? '') ?? DateTime.now();

    if (DateTime.now().day != lastUpdateDate.day) {
      if (dailyPoints > (prefs.getDouble('previousDayPoints') ?? 0)) {
        message = "لقد جمعت اليوم نقاطًا أكثر من أمس. أداء رائع!";
      } else {
        message = "حاول جمع نقاط أكثر غدًا للوصول إلى أهدافك!";
      }

      // تحديث بيانات اليوم السابق
      prefs.setDouble('previousDayPoints', dailyPoints);
      dailyPoints = 0; // إعادة تعيين نقاط اليوم الجديد
      prefs.setString('lastUpdateDate', DateTime.now().toIso8601String());
      await _saveUserData();
    }

    // إخطار المستخدم بالنقاط المتبقية للوصول إلى الهدف
    double pointsRemaining = goalPoints - totalPoints;
    if (pointsRemaining > 0 && message == null) {
      message = "أنت على بُعد ${pointsRemaining.toStringAsFixed(0)} نقطة من إكمال الخطة التعليمية.";
    }

    // إشعار المستخدم بنشاط اليوم ضمن الخطة
    if (message == null && learningPlan.isNotEmpty) {
      int dayIndex = DateTime.now().weekday % learningPlan.length;
      message = "نشاط اليوم: ${learningPlan[dayIndex]}";
    }

    if (message != null) {
      _sendMessageToUser(message);
    }
  }

  // إرسال رسالة إلى واجهة المستخدم
  void _sendMessageToUser(String message) {
    setState(() {
      _messages.add({"sender": "bot", "text": message});
    });
  }

  // معالجة الرسائل الواردة من المستخدم
  Future<void> _handleMessage(String message) async {
    setState(() {
      _messages.add({"sender": "user", "text": message});
    });

    String response;
    if (message.toLowerCase().contains("التقدم")) {
      response = "إجمالي النقاط الخاصة بك هو $totalPoints، وأنت في مستوى $userRank. استمر في العمل لتحقيق المزيد!";
    } else if (message.toLowerCase().contains("نصيحة")) {
      response = "حافظ على الاستمرارية في الدراسة واحرص على تحديد أهداف يومية.";
    } else if (message.toLowerCase().contains("خطة تعليمية")) {
      response = _generateLearningPlan();
    } else if (message.toLowerCase().contains("حل مسألة رياضية")) {
      response = "يمكنني مساعدتك في حل المسائل الرياضية، من فضلك اكتب سؤالك.";
    } else {
      response = "مرحباً! يمكنك سؤالي عن \"التقدم\" أو طلب \"نصيحة\" أو \"خطة تعليمية\".";
    }

    setState(() {
      _messages.add({"sender": "bot", "text": response});
    });

    // إضافة نقاط كمثال على التفاعل مع المستخدم
    await _updatePoints(100);
  }

  // نموذج خطة تعليمية
  String _generateLearningPlan() {
    return """
إليك خطة دراسية كاملة:

1. **تحديد الأهداف**: تحديد أهدافك اليومية والأسبوعية، والتأكد من أنها واضحة.
2. **جدولة الوقت**: وضع جدول دراسي ثابت يومياً لتوزيع وقتك.
3. **استخدام الاستراتيجيات**: الاستفادة من استراتيجيات مثل التلخيص والتكرار النشط.
4. **تقييم ذاتي دوري**: اختبر نفسك بانتظام لتحديد نقاط التحسن.
5. **الحفاظ على الصحة**: النوم الكافي وتناول الطعام الصحي لمساعدتك على التركيز.
6. **التطوير الشخصي**: احرص على قراءة مواضيع جديدة وتعلم مهارات مفيدة.

بإمكانك تعديل هذه الخطة حسب احتياجاتك وأهدافك الخاصة. تابع نقاطك لتحقق النجاح!
""";
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("مساعد التعلم الشخصي"),
      ),
      body: Column(
        children: [
          Expanded(
            child: ListView.builder(
              itemCount: _messages.length,
              itemBuilder: (context, index) {
                final message = _messages[index];
                final isUserMessage = message['sender'] == 'user';
                return Container(
                  margin: EdgeInsets.symmetric(vertical: 5, horizontal: 10),
                  alignment: isUserMessage ? Alignment.centerRight : Alignment.centerLeft,
                  child: Container(
                    padding: EdgeInsets.all(10),
                    decoration: BoxDecoration(
                      color: isUserMessage ? Colors.blue : Colors.grey.shade300,
                      borderRadius: BorderRadius.circular(10),
                    ),
                    child: Text(
                      message['text']!,
                      style: TextStyle(color: isUserMessage ? Colors.white : Colors.black),
                    ),
                  ),
                );
              },
            ),
          ),
          Padding(
            padding: const EdgeInsets.all(8.0),
            child: Row(
              children: [
                Expanded(
                  child: TextField(
                    controller: _messageController,
                    decoration: InputDecoration(
                      hintText: "اكتب رسالتك هنا...",
                      border: OutlineInputBorder(
                        borderRadius: BorderRadius.circular(10),
                      ),
                    ),
                  ),
                ),
                IconButton(
                  icon: Icon(Icons.send),
                  onPressed: () {
                    if (_messageController.text.isNotEmpty) {
                      _handleMessage(_messageController.text);
                      _messageController.clear();
                    }
                  },
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}


class MathArabicLlama {
  final String apiUrl = 'https://api-inference.huggingface.co/models/Jr23xd23/Math_Arabic_Llama-3.2-3B-Instruct';
  final String apiKey = 'b98400b95f084cd5ba9163d5fc9d2dec'; // استبدل بمفتاح API الخاص بك

  Future<String> solveMathProblem(String inputText) async {
    final response = await http.post(
      Uri.parse(apiUrl),
      headers: {
        'Authorization': 'Bearer $apiKey',
        'Content-Type': 'application/json',
      },
      body: json.encode({'inputs': inputText}),
    );

    if (response.statusCode == 200) {
      final decodedResponse = json.decode(response.body);
      return decodedResponse[0]['generated_text'];
    } else {
      throw Exception("فشل الحصول على الناتج. خطأ: ${response.body}");
    }
  }
}

class AssemblyAI {
  final String apiKey = 'b98400b95f084cd5ba9163d5fc9d2dec';

  Future<String> transcribe(String audioUrl) async {
    final url = Uri.parse('https://api.assemblyai.com/v2/transcript');
    final headers = {
      'authorization': apiKey,
      'content-type': 'application/json',
    };
    final body = json.encode({'audio_url': audioUrl});

    final response = await http.post(url, headers: headers, body: body);

    if (response.statusCode == 200) {
      final transcript = json.decode(response.body);
      return transcript['text'];
    } else {
      throw Exception("فشل الحصول على النص المكتوب. خطأ: ${response.body}");
    }
  }
}

class VLLMClient {
  final String baseUrl = 'http://localhost:8000/v1/chat/completions';

  Future<String> chat(String userMessage) async {
    final response = await http.post(
      Uri.parse(baseUrl),
      headers: {
        "Content-Type": "application/json",
      },
      body: json.encode({
        "model": "xlnet/xlnet-base-cased",
        "messages": [
          {"role": "user", "content": userMessage}
        ],
      }),
    );

    if (response.statusCode == 200) {
      final responseData = json.decode(response.body);
      return responseData['choices'][0]['message']['content'];
    } else {
      throw Exception("فشل الحصول على الرد. خطأ: ${response.body}");
    }
  }
}

class EducationalModel {
  final MathArabicLlama mathModel = MathArabicLlama();
  final AssemblyAI assemblyAI = AssemblyAI();
  final VLLMClient vllmClient = VLLMClient();

  Future<void> analyzeUserData(String audioUrl, String mathQuestion, String userMessage) async {
    try {
      // تحويل الصوت إلى نص
      String transcript = await assemblyAI.transcribe(audioUrl);
      print("النص المحول: $transcript");

      // حل مسألة رياضية
      String mathSolution = await mathModel.solveMathProblem(mathQuestion);
      print("حل المسألة: $mathSolution");

      // محادثة مع المستخدم
      String chatResponse = await vllmClient.chat(userMessage);
      print("رد الدردشة: $chatResponse");

      // هنا يمكنك إضافة المزيد من الوظائف مثل تحليل البيانات وإرسال الرسائل
    } catch (e) {
      print("حدث خطأ: $e");
    }
  }
}

